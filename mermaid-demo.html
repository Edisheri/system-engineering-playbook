<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid –î–∏–∞–≥—Ä–∞–º–º—ã - –î–µ–º–æ</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .diagram-container {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        h2 {
            color: #333;
            border-bottom: 2px solid #4a90e2;
            padding-bottom: 10px;
        }
        .mermaid {
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>üéØ Mermaid –î–∏–∞–≥—Ä–∞–º–º—ã - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</h1>
    
    <div class="diagram-container">
        <h2>1. C4 Context Diagram</h2>
        <div class="mermaid">
graph TB
    subgraph "External Users"
        Patient[üë§ –ü–∞—Ü–∏–µ–Ω—Ç]
        Admin[üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä]
        Clinic[üè• Clinic MIS]
    end
    
    subgraph "Medical Diagnosis Platform"
        System[üè• –°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏<br/>–∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π]
    end
    
    Patient -->|"–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ<br/>POST /upload"| System
    Admin -->|"–£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–æ–ª—è–º–∏<br/>Keycloak"| System
    System -->|"–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á—ë—Ç—ã<br/>POST /report"| Clinic
    
    style System fill:#4a90e2,stroke:#2e5c8a,stroke-width:3px,color:#fff
    style Patient fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Admin fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Clinic fill:#e6a23c,stroke:#b8821e,stroke-width:2px
        </div>
    </div>

    <div class="diagram-container">
        <h2>2. IDEF0 - –§—É–Ω–∫—Ü–∏—è A1: –ü—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö</h2>
        <div class="mermaid">
graph LR
    subgraph Inputs ["–í–•–û–î—ã"]
        I1[HTTP POST<br/>–∑–∞–ø—Ä–æ—Å—ã]
        I2[–§–∞–π–ª—ã<br/>JPEG/PNG/JSON]
    end
    
    subgraph Control ["–£–ü–†–ê–í–õ–ï–ù–ò–ï"]
        C1[–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏<br/>—Ä–∞–∑–º–µ—Ä ‚â§10–ú–ë]
        C2[–§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ <br/>JPEG/PNG/TXT]
        C3[–ü–æ–ª–∏—Ç–∏–∫–∏<br/>–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏]
    end
    
    subgraph Process ["A1"]
        A1[–ü—Ä–∏—ë–º<br/>–¥–∞–Ω–Ω—ã—Ö]
    end
    
    subgraph Mechanisms ["–ú–ï–•–ê–ù–ò–ó–ú–´"]
        M1[Nginx<br/>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞]
        M2[AWS S3<br/>–•—Ä–∞–Ω–∏–ª–∏—â–µ]
        M3[Spring Boot<br/>API]
        M4[Multipart<br/>Parser]
    end
    
    subgraph Outputs ["–í–´–•–û–î—ã"]
        O1[–§–∞–π–ª—ã –≤ S3<br/>S3 URL]
        O2[–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ<br/>–≤ PostgreSQL]
        O3[–°–æ–æ–±—â–µ–Ω–∏–µ<br/>–≤ RabbitMQ]
    end
    
    I1 --> A1
    I2 --> A1
    C1 --> A1
    C2 --> A1
    C3 --> A1
    
    M1 -.support.-> A1
    M2 -.support.-> A1
    M3 -.support.-> A1
    M4 -.support.-> A1
    
    A1 --> O1
    A1 --> O2
    A1 --> O3
    
    style A1 fill:#4a90e2,stroke: #2e5c8a, stroke-width:4px,color:#fff
    style I1 fill: #67c23a,stroke: #4a9428, stroke-width:2px
    style I2 fill: #67c23a,stroke: #4a9428, stroke-width:2px
    style O1 fill:#e6a23c,stroke: #b8821e, stroke-width:2px
    style O2 fill: #e6a23c, stroke: #b8821e, stroke-width:2px
    style O3 fill: #e6a23c,stroke: #b8821e, stroke-width:2px
    style C1 fill:#9966ff, stroke: #7744cc,stroke-width:2px,color:#fff
    style C2 fill:#9966ff, stroke: #7744cc,stroke-width: 2px;color:#fff
    style C3 fill:#9966ff,stroke: #7744cc, stroke-width:2px,color:#fff
        </div>
    </div>

    <div class="diagram-container">
        <h2>3. BPMN - –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞</h2>
        <div class="mermaid">
graph TD
    Start([üöÄ –ù–∞—á–∞–ª–æ])
    Input[üìù –í–≤–æ–¥ email –∏ –ø–∞—Ä–æ–ª—è]
    Validate{‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è<br/>–¥–∞–Ω–Ω—ã—Ö}
    CheckEmail{üìß Email<br/>—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?}
    CreateUser[üë§ –°–æ–∑–¥–∞–Ω–∏–µ<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    SendEmail[üì® –û—Ç–ø—Ä–∞–≤–∫–∞<br/>–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è]
    WaitConfirm[‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ<br/>–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è]
    Confirm{‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br/>–ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª?}
    Activate[‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è<br/>–∞–∫–∫–∞—É–Ω—Ç–∞]
    End([üéâ –£—Å–ø–µ—à–Ω–∞—è<br/>—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è])
    Error[‚ùå –û—à–∏–±–∫–∞<br/>—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏]
    
    Start --> Input
    Input --> Validate
    Validate -->|–í–∞–ª–∏–¥–Ω—ã–µ| CheckEmail
    Validate -->|–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ| Error
    CheckEmail -->|–ù–µ—Ç| CreateUser
    CheckEmail -->|–î–∞| Error
    CreateUser --> SendEmail
    SendEmail --> WaitConfirm
    WaitConfirm --> Confirm
    Confirm -->|–î–∞| Activate
    Confirm -->|–ù–µ—Ç| WaitConfirm
    Activate --> End
    
    style Start fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style End fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Error fill:#f56c6c,stroke:#c45656,stroke-width:2px
    style Validate fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style CheckEmail fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style Confirm fill:#e6a23c,stroke:#b8821e,stroke-width:2px
        </div>
    </div>

    <div class="diagram-container">
        <h2>4. UML Use Case - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
        <div class="mermaid">
graph TB
    subgraph "–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π"
        UC1[–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞]
        UC2[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email]
        UC3[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏]
        UC4[–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è]
    end
    
    subgraph "–ê–∫—Ç–µ—Ä—ã"
        Patient[üë§ –ü–∞—Ü–∏–µ–Ω—Ç]
        Admin[üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä]
    end
    
    Patient --> UC1
    Patient --> UC2
    Patient --> UC4
    Admin --> UC3
    Admin --> UC4
    
    UC1 -.->|–≤–∫–ª—é—á–∞–µ—Ç| UC2
    UC4 -.->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| UC1
    
    style UC1 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UC2 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UC3 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UC4 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style Patient fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Admin fill:#67c23a,stroke:#4a9428,stroke-width:2px
        </div>
    </div>

    <div class="diagram-container">
        <h2>5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
        <div class="mermaid">
graph TB
    subgraph "Frontend Layer"
        React[React App<br/>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å]
    end
    
    subgraph "API Gateway Layer"
        Gateway[Spring Cloud Gateway<br/>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è]
    end
    
    subgraph "Business Logic Layer"
        AuthService[Auth Service<br/>JWT + Keycloak]
        UploadService[Upload Service<br/>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤]
        MLService[ML Inference Service<br/>TensorFlow Serving]
    end
    
    subgraph "Data Layer"
        PostgreSQL[(PostgreSQL<br/>–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)]
        Redis[(Redis<br/>–ö—ç—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)]
        S3[(AWS S3<br/>–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)]
    end
    
    subgraph "Message Layer"
        RabbitMQ[RabbitMQ<br/>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞]
    end
    
    React -->|HTTPS| Gateway
    Gateway --> AuthService
    Gateway --> UploadService
    UploadService --> S3
    UploadService --> RabbitMQ
    RabbitMQ --> MLService
    MLService --> Redis
    MLService --> PostgreSQL
    AuthService --> PostgreSQL
    
    style React fill:#61dafb,stroke:#21a1c4,stroke-width:2px
    style Gateway fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style AuthService fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style UploadService fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style MLService fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style PostgreSQL fill:#336791,stroke:#1e4a5f,stroke-width:2px,color:#fff
    style Redis fill:#dc382d,stroke:#a0281f,stroke-width:2px,color:#fff
    style S3 fill:#ff9900,stroke:#cc7a00,stroke-width:2px,color:#fff
    style RabbitMQ fill:#ff6600,stroke:#cc5200,stroke-width:2px,color:#fff
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>
