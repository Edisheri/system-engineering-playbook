# UML Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹: ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹

## Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ 3: ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ¸Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ (ResNet-50)

### 1. Use Case Diagram (Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ² Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)

```mermaid
graph TB
    subgraph "Actors"
        MLService[ğŸ¤– ML Service]
        MLEngineer[ğŸ‘¨â€ğŸ’» ML Engineer]
        GPUCluster[âš¡ GPU Cluster]
    end
    
    subgraph "Use Cases"
        Preprocess[ĞŸÑ€ĞµĞ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¸Ğ½Ğ³ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ]
        Classify[ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ ResNet-50]
        UpdateModel[ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸]
        Monitor[ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸]
    end
    
    MLService --> Preprocess
    MLService --> Classify
    MLEngineer --> UpdateModel
    MLEngineer --> Monitor
    GPUCluster --> Preprocess
    GPUCluster --> Classify
    Monitor -.->|extends| Preprocess
    Monitor -.->|extends| Classify
    Monitor -.->|extends| UpdateModel
    
    style MLService fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style MLEngineer fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style GPUCluster fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style Preprocess fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style Classify fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UpdateModel fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style Monitor fill:#9966ff,stroke:#7744cc,stroke-width:2px,color:#fff
```

**ĞĞºÑ‚Ñ‘Ñ€Ñ‹:**
- **ML Service** (ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°)
- **ML Engineer** (Ğ¸Ğ½Ğ¶ĞµĞ½ĞµÑ€ Ğ¼Ğ°ÑˆĞ¸Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ)
- **GPU Cluster** (Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°)

**Ğ’Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
1. **ĞŸÑ€ĞµĞ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¸Ğ½Ğ³ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ**
   - ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ°ĞºÑ‚Ñ‘Ñ€: ML Service
   - ĞŸÑ€ĞµĞ´ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ: Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ¾ Ğ² S3
   - ĞŸĞ¾ÑÑ‚ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ: Ğ¢ĞµĞ½Ğ·Ğ¾Ñ€ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ inference
   
2. **ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (ResNet-50)**
   - ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ°ĞºÑ‚Ñ‘Ñ€: ML Service
   - ĞŸÑ€ĞµĞ´ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ: Ğ¢ĞµĞ½Ğ·Ğ¾Ñ€ Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½
   - ĞŸĞ¾ÑÑ‚ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ: Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ñ‹
   
3. **ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸**
   - ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ°ĞºÑ‚Ñ‘Ñ€: ML Engineer
   - ĞŸÑ€ĞµĞ´ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ: ĞĞ¾Ğ²Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ°
   - ĞŸĞ¾ÑÑ‚ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ: ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ñ€Ğ°Ğ·Ğ²Ñ‘Ñ€Ğ½ÑƒÑ‚Ğ° Ğ² TensorFlow Serving

4. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸**
   - ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ°ĞºÑ‚Ñ‘Ñ€: ML Engineer
   - Ğ¡Ğ²ÑĞ·ÑŒ: `<<extend>>` Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²

**Ğ¡Ğ²ÑĞ·Ğ¸:**
- `<<include>>`: ĞšĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ Ğ¿Ñ€ĞµĞ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¸Ğ½Ğ³
- `<<extend>>`: ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑĞµÑ‚ ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

---

### 2. Activity Diagram (Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ĞµĞ¹)

```
[ĞĞ°Ñ‡Ğ°Ğ»Ğ¾: Message from RabbitMQ]
    â†“
[ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ fileId Ğ¸Ğ· ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ]
    â†“
[Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· S3]
    â†“
<Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² ĞºÑÑˆĞµ?> â—‡
    â”œâ”€ Ğ”Ğ° â†’ [ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ¸Ğ· Redis] â†’ [Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚] â†’ [ĞšĞ¾Ğ½ĞµÑ†]
    â””â”€ ĞĞµÑ‚ â†“
[Ğ”ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (OpenCV)]
    â†“
[ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ½Ğ¾ÑÑ‚Ğ¸]
    â†“
<Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚ĞµĞ½?> â—‡
    â”œâ”€ ĞĞµÑ‚ â†’ [Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ´Ğ¾ 224x224]
    â””â”€ Ğ”Ğ° â†“
[ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¸ĞºÑĞµĞ»ĞµĞ¹ (mean=[0.485, 0.456, 0.406])]
    â†“
[ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ‚ĞµĞ½Ğ·Ğ¾Ñ€ (CHW format)]
    â†“
[Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ batch dimension]
    â†“
[ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² TensorFlow Serving (gRPC)]
    â†“
[ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ GPU inference (â‰¤2 ÑĞµĞº)]
    â†“
[ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ĞµĞ¹ (softmax)]
    â†“
[ĞŸĞ¾ÑÑ‚Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¸Ğ½Ğ³: Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¾Ğ¿-3 ĞºĞ»Ğ°ÑÑĞ°]
    â†“
[Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ heatmap (Grad-CAM)]
    â†“
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â•‘ ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ â•‘
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â•‘                          â•‘
    â•‘ [Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Redis]     â•‘ [Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² PostgreSQL]
    â•‘  TTL = 1 Ñ‡Ğ°Ñ             â•‘  + heatmap URL
    â•‘                          â•‘
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    â†“
[ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ² WebSocket]
    â†“
[ĞšĞ¾Ğ½ĞµÑ†]
```

**ĞÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸:**
- ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

---

### 3. Sequence Diagram (Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸)

**Ğ£Ñ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸:**
- RabbitMQ
- MLInferenceService
- S3Client
- ImagePreprocessor
- TensorFlowServing
- ResNetModel
- GradCAM
- Redis
- PostgreSQL
- WebSocketNotifier

```
RabbitMQ  MLService  S3Client  Preprocessor  TFServing  ResNet  GradCAM  Redis  PostgreSQL  WebSocket
   |          |         |           |            |         |        |       |        |          |
   |--msg---->|         |           |            |         |        |       |        |          |
   |{fileId}  |         |           |            |         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--download(fileId)-->|            |         |        |       |        |          |
   |          |         |--GET----->|            |         |        |       |        |          |
   |          |         |<--bytes---|            |         |        |       |        |          |
   |          |<--image-|           |            |         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--preprocess(image)-------------->|         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |         |     [decode image]     |         |        |       |        |          |
   |          |         |     [resize 224x224]   |         |        |       |        |          |
   |          |         |     [normalize]        |         |        |       |        |          |
   |          |         |     [to_tensor]        |         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |<--tensor-----------|            |         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--predict(tensor)--------------->|         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |         |           |      [gRPC call]     |        |       |        |          |
   |          |         |           |            |-------->|        |       |        |          |
   |          |         |           |            |  forward_pass   |       |        |          |
   |          |         |           |            |<--------|        |       |        |          |
   |          |         |           |            |  logits |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |         |           |      [softmax]       |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |<--probabilities-----|            |         |        |       |        |          |
   |          |  [0.95, 0.03, 0.02, ...]         |         |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--generate_heatmap(tensor, probabilities)----------->|       |        |          |
   |          |         |           |            |         |  Grad-CAM     |        |          |
   |          |<--heatmap_image-----|            |         |<-------|       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |         |           |   [Parallel save]    |        |       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--cache(results)------------------------------->|    |       |        |          |
   |          |         |           |            |         | SET    |       |        |          |
   |          |         |           |            |         |<-------|       |        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--save(results, heatmap)------------------------------->|    |        |          |
   |          |         |           |            |         |        | INSERT|        |          |
   |          |         |           |            |         |        |<------|        |          |
   |          |         |           |            |         |        |       |        |          |
   |          |--notify(userId, results)---------------------------------------->|   |          |
   |          |         |           |            |         |        |       |        |--------->|
   |          |         |           |            |         |        |       |        |  send    |
   |          |         |           |            |         |        |       |        |  message |
   |          |         |           |            |         |        |       |        |          |
   |<--ACK----|         |           |            |         |        |       |        |          |
```

**ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹:**
- gRPC Ğ´Ğ»Ñ Ğ²Ñ‹ÑĞ¾ĞºĞ¾Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğ³Ğ¾ inference
- Grad-CAM Ğ´Ğ»Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸
- ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Redis Ğ¸ PostgreSQL

---

### 4. Class Diagram (Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ĞºĞ»Ğ°ÑÑĞ¾Ğ²)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MLInferenceService            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - messageConsumer: RabbitMQ     â”‚
â”‚ - preprocessor: ImagePreprocessorâ”‚
â”‚ - tfClient: TensorFlowClient    â”‚
â”‚ - postprocessor: PostProcessor  â”‚
â”‚ - cacheService: CacheService    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + processMessage(msg): void     â”‚
â”‚ + runInference(file): Result    â”‚
â”‚ + saveResults(result): void     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ uses
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ImagePreprocessor             â”‚         â”‚   TensorFlowClient          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - targetSize: (int, int)        â”‚         â”‚ - serverUrl: String         â”‚
â”‚ - mean: float[]                 â”‚         â”‚ - modelName: String         â”‚
â”‚ - std: float[]                  â”‚         â”‚ - channel: gRPCChannel      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + decode(bytes): Image          â”‚         â”‚ + predict(tensor): Tensor   â”‚
â”‚ + resize(image): Image          â”‚         â”‚ + batchPredict(tensors): []  â”‚
â”‚ + normalize(image): Tensor      â”‚         â”‚ + getModelMetadata(): Meta  â”‚
â”‚ + preprocess(image): Tensor     â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                            â”‚
           â”‚ produces                                   â”‚ uses
           â†“                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Tensor                    â”‚         â”‚   ResNetModel               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - shape: int[]                  â”‚         â”‚ - inputShape: [1,224,224,3] â”‚
â”‚ - dtype: DataType               â”‚         â”‚ - numClasses: int           â”‚
â”‚ - data: ByteBuffer              â”‚         â”‚ - weights: String (path)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + reshape(shape): Tensor        â”‚         â”‚ + forward(tensor): Logits   â”‚
â”‚ + toArray(): float[]            â”‚         â”‚ + getLayer(name): Layer     â”‚
â”‚ + getShape(): int[]             â”‚         â”‚ + loadWeights(path): void   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    PostProcessor                â”‚         â”‚      GradCAM                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - classLabels: Map<int, String> â”‚         â”‚ - model: ResNetModel        â”‚
â”‚ - threshold: float              â”‚         â”‚ - targetLayer: String       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + softmax(logits): Probs        â”‚         â”‚ + generate(tensor, class): Imageâ”‚
â”‚ + topK(probs, k): List          â”‚         â”‚ + computeGradients(): Tensorâ”‚
â”‚ + formatResult(probs): Result   â”‚         â”‚ + applyColormap(heatmap): Imageâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   InferenceResult               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - fileId: UUID                  â”‚
â”‚ - predictions: List<Prediction> â”‚
â”‚ - heatmapUrl: String            â”‚
â”‚ - inferenceTime: Duration       â”‚
â”‚ - timestamp: Timestamp          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + getTopPrediction(): Predictionâ”‚
â”‚ + toJSON(): String              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Prediction                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - className: String             â”‚
â”‚ - probability: float            â”‚
â”‚ - confidence: float             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + isHighConfidence(): boolean   â”‚
â”‚ + toString(): String            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CacheService                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - redisTemplate: RedisTemplate  â”‚
â”‚ - ttl: Duration                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + get(key): Optional<Result>    â”‚
â”‚ + set(key, value, ttl): void    â”‚
â”‚ + invalidate(key): void         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹:**
- **Strategy:** ImagePreprocessor (Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ Ğ¿Ñ€ĞµĞ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¸Ğ½Ğ³Ğ°)
- **Factory:** TensorFlowClient (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ gRPC ĞºĞ°Ğ½Ğ°Ğ»Ğ¾Ğ²)
- **Repository:** CacheService (Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ğ½Ğ°Ğ´ Redis)

---

### 5. State Diagram (Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹)

**ĞĞ±ÑŠĞµĞºÑ‚:** Image Inference Task

```
          [Message received]
                 â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â—â”€â”€â”€>â”‚  Queued  â”‚
           â”‚(Ğ’ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸)â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ consumer picks up
                 â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ Downloading  â”‚
           â”‚(Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ· S3)â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”
            â”‚    â”‚    â”‚
    error   â”‚    â”‚    â”‚ success
        â”Œâ”€â”€â”€â”˜    â”‚    â””â”€â”€â”€â”
        â”‚        â”‚        â”‚
        â†“        â†“        â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Failed â”‚ â”‚Preprocessing â”‚
   â”‚(ĞÑˆĞ¸Ğ±ĞºĞ°)â”‚ â”‚(ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚
        â”‚           â”‚ tensor ready
        â”‚           â†“
        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     â”‚  Inferencing â”‚
        â”‚     â”‚(GPU Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°)â”‚
        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚
        â”‚      â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”
        â”‚      â”‚    â”‚    â”‚
        â”‚ GPU  â”‚    â”‚    â”‚ success
        â”‚ errorâ”‚    â”‚    â”‚
        â”‚   â”Œâ”€â”€â”˜    â”‚    â””â”€â”€â”
        â”‚   â”‚       â”‚       â”‚
        â””â”€â”€â”€â–º       â†“       â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚PostProcessingâ”‚ â”‚  Generating  â”‚
           â”‚(ĞŸĞ¾ÑÑ‚-Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°)â”‚  Heatmap     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚(Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ñ€Ñ‚Ñ‹)â”‚
                 â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                â”‚
                 â”‚                â”‚
                 â†“                â†“
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   Caching    â”‚ â”‚   Saving     â”‚
           â”‚(ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ) â”‚ â”‚ (Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ) â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚Completed â”‚
                    â”‚(Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾)  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â†“
                          â—
```

**Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ:**
1. **Queued:** Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ² RabbitMQ
2. **Downloading:** Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸Ğ· S3
3. **Preprocessing:** ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ñ‚ĞµĞ½Ğ·Ğ¾Ñ€Ğ°
4. **Inferencing:** GPU inference (ResNet-50)
5. **PostProcessing:** ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
6. **Generating Heatmap:** Grad-CAM Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
7. **Caching:** Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Redis
8. **Saving:** Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² PostgreSQL
9. **Completed:** Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ°
10. **Failed:** ĞÑˆĞ¸Ğ±ĞºĞ° Ğ½Ğ° Ğ»ÑĞ±Ğ¾Ğ¼ ÑÑ‚Ğ°Ğ¿Ğµ

**ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´Ñ‹ Ñ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ğ°Ğ¼Ğ¸:**
- Downloading â†’ Failed (ĞµÑĞ»Ğ¸ S3 Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ > 30 ÑĞµĞº)
- Inferencing â†’ Failed (ĞµÑĞ»Ğ¸ GPU timeout > 5 ÑĞµĞº)

---

### 6. Component Diagram (Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ML Inference Service                              â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                      â”‚       â”‚                  â”‚       â”‚
â”‚  â”‚  MessageConsumer     â”‚â”€â”€â”€â”€â”€â”€>â”‚ InferenceOrchestrator   â”‚
â”‚  â”‚   (RabbitMQ)         â”‚triggers                  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                           â”‚                 â”‚
â”‚                                           â”‚ orchestrates    â”‚
â”‚                                           â†“                 â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚                         â”‚  Pipeline Components        â”‚    â”‚
â”‚                         â”‚                              â”‚    â”‚
â”‚                         â”‚  - ImagePreprocessor         â”‚    â”‚
â”‚                         â”‚  - TensorFlowClient          â”‚    â”‚
â”‚                         â”‚  - PostProcessor             â”‚    â”‚
â”‚                         â”‚  - GradCAMGenerator          â”‚    â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                        â”‚
                    â”‚ uses                   â”‚ uses
                    â†“                        â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                        â”‚   â”‚                     â”‚
     â”‚  TensorFlow Serving    â”‚   â”‚   OpenCV Library    â”‚
     â”‚    (gRPC Server)       â”‚   â”‚   (C++ Backend)     â”‚
     â”‚                        â”‚   â”‚                     â”‚
     â”‚  - ResNet-50 Model     â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚  - Model Signature     â”‚
     â”‚  - GPU Support         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â”‚ runs on
                    â†“
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   GPU Cluster    â”‚
          â”‚  (NVIDIA T4/A100)â”‚
          â”‚                  â”‚
          â”‚  - CUDA 11.x     â”‚
          â”‚  - cuDNN 8.x     â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Storage Components                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                  â”‚           â”‚                  â”‚       â”‚
â”‚  â”‚  CacheService    â”‚           â”‚ ResultRepository â”‚       â”‚
â”‚  â”‚   (Redis)        â”‚           â”‚  (PostgreSQL)    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                               â”‚                   â”‚
â”‚         â”‚ stores                        â”‚ persists          â”‚
â”‚         â†“                               â†“                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Redis Cluster   â”‚           â”‚  PostgreSQL DB   â”‚       â”‚
â”‚  â”‚  (In-memory)     â”‚           â”‚  (results table) â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Monitoring Components                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                      â”‚       â”‚                  â”‚       â”‚
â”‚  â”‚  MetricsCollector    â”‚â”€â”€â”€â”€â”€â”€>â”‚  Prometheus      â”‚       â”‚
â”‚  â”‚                      â”‚exportsâ”‚  (TSDB)          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚           â”‚                                                 â”‚
â”‚           â”‚ tracks                                          â”‚
â”‚           â”‚                                                 â”‚
â”‚           â”‚  - Inference time                               â”‚
â”‚           â”‚  - GPU utilization                              â”‚
â”‚           â”‚  - Throughput                                   â”‚
â”‚           â”‚  - Error rate                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹:**
- `gRPC`: TensorFlow Serving API
- `AMQP`: RabbitMQ message protocol
- `Redis Protocol`: Cache communication
- `JDBC`: PostgreSQL connection

---

## Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸

- Â«Deep LearningÂ» Ian Goodfellow
- [ResNet Paper](https://arxiv.org/abs/1512.03385)
- [Grad-CAM](https://arxiv.org/abs/1610.02391)
- [TensorFlow Serving Guide](https://www.tensorflow.org/tfx/guide/serving)

