<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid –î–∏–∞–≥—Ä–∞–º–º—ã - –°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f8f9fa;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        .diagram-section {
            margin: 40px 0;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .diagram-title {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .diagram-container {
            text-align: center;
            margin: 20px 0;
        }
        .mermaid {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .description {
            margin: 20px 0;
            padding: 15px;
            background: #e8f4f8;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        .nav-links {
            text-align: center;
            margin: 30px 0;
        }
        .nav-links a {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        .nav-links a:hover {
            background: #2980b9;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéØ Mermaid –î–∏–∞–≥—Ä–∞–º–º—ã</h1>
        <h2>–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π</h2>
        <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã</p>
    </div>

    <div class="nav-links">
        <a href="index.html">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–Ω–∏–≥–µ</a>
        <a href="mermaid-demo.html">–î–µ–º–æ –¥–∏–∞–≥—Ä–∞–º–º—ã</a>
        <a href="architecture/c4-diagrams.html">C4 –ú–æ–¥–µ–ª—å</a>
    </div>

    <div class="diagram-section">
        <h2 class="diagram-title">1. C4 Context Diagram</h2>
        <div class="description">
            <strong>–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –≤ —Å–∞–º–æ–º —à–∏—Ä–æ–∫–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –≤–∫–ª—é—á–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.
        </div>
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    subgraph "External Users"
        Patient[üë§ –ü–∞—Ü–∏–µ–Ω—Ç]
        Admin[üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä]
        Clinic[üè• Clinic MIS]
    end
    
    subgraph "Medical Diagnosis Platform"
        System[üè• –°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏<br/>–∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π]
    end
    
    Patient -->|"–ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ<br/>POST /upload"| System
    Admin -->|"–£–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–æ–ª—è–º–∏<br/>Keycloak"| System
    System -->|"–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—á—ë—Ç—ã<br/>POST /report"| Clinic
    
    style System fill:#4a90e2,stroke:#2e5c8a,stroke-width:3px,color:#fff
    style Patient fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Admin fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Clinic fill:#e6a23c,stroke:#b8821e,stroke-width:2px
            </div>
        </div>
    </div>

    <div class="diagram-section">
        <h2 class="diagram-title">2. IDEF0 - –§—É–Ω–∫—Ü–∏—è A1: –ü—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö</h2>
        <div class="description">
            <strong>IDEF0 –¥–∏–∞–≥—Ä–∞–º–º–∞</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–∏—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö —Å –≤—Ö–æ–¥–∞–º–∏, –≤—ã—Ö–æ–¥–∞–º–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏.
        </div>
        <div class="diagram-container">
            <div class="mermaid">
graph LR
    subgraph Inputs ["–í–•–û–î–´"]
        I1[HTTP POST<br/>–∑–∞–ø—Ä–æ—Å—ã]
        I2[–§–∞–π–ª—ã<br/>JPEG/PNG/JSON]
    end
    
    subgraph Control ["–£–ü–†–ê–í–õ–ï–ù–ò–ï"]
        C1[–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏<br/>—Ä–∞–∑–º–µ—Ä ‚â§10–ú–ë]
        C2[–§–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤ <br/>JPEG/PNG/TXT]
        C3[–ü–æ–ª–∏—Ç–∏–∫–∏<br/>–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏]
    end
    
    subgraph Process ["A1"]
        A1[–ü—Ä–∏—ë–º<br/>–¥–∞–Ω–Ω—ã—Ö]
    end
    
    subgraph Mechanisms ["–ú–ï–•–ê–ù–ò–ó–ú–´"]
        M1[Nginx<br/>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞]
        M2[AWS S3<br/>–•—Ä–∞–Ω–∏–ª–∏—â–µ]
        M3[Spring Boot<br/>API]
        M4[Multipart<br/>Parser]
    end
    
    subgraph Outputs ["–í–´–•–û–î–´"]
        O1[–§–∞–π–ª—ã –≤ S3<br/>S3 URL]
        O2[–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ<br/>–≤ PostgreSQL]
        O3[–°–æ–æ–±—â–µ–Ω–∏–µ<br/>–≤ RabbitMQ]
    end
    
    I1 --> A1
    I2 --> A1
    C1 --> A1
    C2 --> A1
    C3 --> A1
    
    M1 -.support.-> A1
    M2 -.support.-> A1
    M3 -.support.-> A1
    M4 -.support.-> A1
    
    A1 --> O1
    A1 --> O2
    A1 --> O3
    
    style A1 fill:#4a90e2,stroke: #2e5c8a, stroke-width:4px,color:#fff
    style I1 fill: #67c23a,stroke: #4a9428, stroke-width:2px
    style I2 fill: #67c23a,stroke: #4a9428, stroke-width:2px
    style O1 fill:#e6a23c,stroke: #b8821e, stroke-width:2px
    style O2 fill: #e6a23c, stroke: #b8821e, stroke-width:2px
    style O3 fill: #e6a23c,stroke: #b8821e, stroke-width:2px
    style C1 fill:#9966ff, stroke: #7744cc,stroke-width:2px,color:#fff
    style C2 fill:#9966ff, stroke: #7744cc,stroke-width: 2px;color:#fff
    style C3 fill:#9966ff,stroke: #7744cc, stroke-width:2px,color:#fff
            </div>
        </div>
    </div>

    <div class="diagram-section">
        <h2 class="diagram-title">3. BPMN - –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞</h2>
        <div class="description">
            <strong>BPMN –¥–∏–∞–≥—Ä–∞–º–º–∞</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ –∏ —Å–æ–±—ã—Ç–∏—è–º–∏.
        </div>
        <div class="diagram-container">
            <div class="mermaid">
graph TD
    Start([üöÄ –ù–∞—á–∞–ª–æ])
    Input[üìù –í–≤–æ–¥ email –∏ –ø–∞—Ä–æ–ª—è]
    Validate{‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è<br/>–¥–∞–Ω–Ω—ã—Ö}
    CheckEmail{üìß Email<br/>—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?}
    CreateUser[üë§ –°–æ–∑–¥–∞–Ω–∏–µ<br/>–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    SendEmail[üì® –û—Ç–ø—Ä–∞–≤–∫–∞<br/>–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è]
    WaitConfirm[‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ<br/>–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è]
    Confirm{‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br/>–ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª?}
    Activate[‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è<br/>–∞–∫–∫–∞—É–Ω—Ç–∞]
    End([üéâ –£—Å–ø–µ—à–Ω–∞—è<br/>—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è])
    Error[‚ùå –û—à–∏–±–∫–∞<br/>—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏]
    
    Start --> Input
    Input --> Validate
    Validate -->|–í–∞–ª–∏–¥–Ω—ã–µ| CheckEmail
    Validate -->|–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ| Error
    CheckEmail -->|–ù–µ—Ç| CreateUser
    CheckEmail -->|–î–∞| Error
    CreateUser --> SendEmail
    SendEmail --> WaitConfirm
    WaitConfirm --> Confirm
    Confirm -->|–î–∞| Activate
    Confirm -->|–ù–µ—Ç| WaitConfirm
    Activate --> End
    
    style Start fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style End fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Error fill:#f56c6c,stroke:#c45656,stroke-width:2px
    style Validate fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style CheckEmail fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style Confirm fill:#e6a23c,stroke:#b8821e,stroke-width:2px
            </div>
        </div>
    </div>

    <div class="diagram-section">
        <h2 class="diagram-title">4. UML Use Case - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
        <div class="description">
            <strong>UML Use Case –¥–∏–∞–≥—Ä–∞–º–º–∞</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∞–∫—Ç—ë—Ä–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π.
        </div>
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    subgraph "–°–∏—Å—Ç–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π"
        UC1[–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ü–∏–µ–Ω—Ç–∞]
        UC2[–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email]
        UC3[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏]
        UC4[–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è]
    end
    
    subgraph "–ê–∫—Ç–µ—Ä—ã"
        Patient[üë§ –ü–∞—Ü–∏–µ–Ω—Ç]
        Admin[üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä]
    end
    
    Patient --> UC1
    Patient --> UC2
    Patient --> UC4
    Admin --> UC3
    Admin --> UC4
    
    UC1 -.->|–≤–∫–ª—é—á–∞–µ—Ç| UC2
    UC4 -.->|–∏—Å–ø–æ–ª—å–∑—É–µ—Ç| UC1
    
    style UC1 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UC2 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UC3 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style UC4 fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style Patient fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style Admin fill:#67c23a,stroke:#4a9428,stroke-width:2px
            </div>
        </div>
    </div>

    <div class="diagram-section">
        <h2 class="diagram-title">5. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
        <div class="description">
            <strong>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–∞—è —Å—Ö–µ–º–∞</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.
        </div>
        <div class="diagram-container">
            <div class="mermaid">
graph TB
    subgraph "Frontend Layer"
        React[React App<br/>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å]
    end
    
    subgraph "API Gateway Layer"
        Gateway[Spring Cloud Gateway<br/>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è]
    end
    
    subgraph "Business Logic Layer"
        AuthService[Auth Service<br/>JWT + Keycloak]
        UploadService[Upload Service<br/>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤]
        MLService[ML Inference Service<br/>TensorFlow Serving]
    end
    
    subgraph "Data Layer"
        PostgreSQL[(PostgreSQL<br/>–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)]
        Redis[(Redis<br/>–ö—ç—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)]
        S3[(AWS S3<br/>–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)]
    end
    
    subgraph "Message Layer"
        RabbitMQ[RabbitMQ<br/>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞]
    end
    
    React -->|HTTPS| Gateway
    Gateway --> AuthService
    Gateway --> UploadService
    UploadService --> S3
    UploadService --> RabbitMQ
    RabbitMQ --> MLService
    MLService --> Redis
    MLService --> PostgreSQL
    AuthService --> PostgreSQL
    
    style React fill:#61dafb,stroke:#21a1c4,stroke-width:2px
    style Gateway fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    style AuthService fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style UploadService fill:#67c23a,stroke:#4a9428,stroke-width:2px
    style MLService fill:#e6a23c,stroke:#b8821e,stroke-width:2px
    style PostgreSQL fill:#336791,stroke:#1e4a5f,stroke-width:2px,color:#fff
    style Redis fill:#dc382d,stroke:#a0281f,stroke-width:2px,color:#fff
    style S3 fill:#ff9900,stroke:#cc7a00,stroke-width:2px,color:#fff
    style RabbitMQ fill:#ff6600,stroke:#cc5200,stroke-width:2px,color:#fff
            </div>
        </div>
    </div>

    <div class="nav-links">
        <a href="index.html">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–Ω–∏–≥–µ</a>
        <a href="mermaid-demo.html">–î–µ–º–æ –¥–∏–∞–≥—Ä–∞–º–º—ã</a>
        <a href="architecture/c4-diagrams.html">C4 –ú–æ–¥–µ–ª—å</a>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35,
                messageAlign: 'center',
                mirrorActors: true,
                bottomMarginAdj: 1,
                useMaxWidth: true,
                rightAngles: false,
                showSequenceNumbers: false
            }
        });
    </script>
</body>
</html>
